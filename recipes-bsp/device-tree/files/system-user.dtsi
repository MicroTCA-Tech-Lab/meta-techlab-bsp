
#include "dt-bindings/gpio/gpio.h"

&gem3 {
    phy-handle = <&phy0>;

    phy0: phy@0 {
        // Marvel 88E1512
        //   compatible string is not needed
        reg = <0>;
        device_type = "ethernet-phy";
        marvell,reg-init =
            <254 15 0x3fff 0>;
    };
};

&axi_gpio_1 {
    // no clock at the start-up
    status = "disabled";
};

&sdhci0 {
    // WP pin is not available on microSD, not connected on the board
    disable-wp;
};

&gpio {
    i2c0oe {
        gpio-hog;
        output-high;
        gpios = <20 GPIO_ACTIVE_HIGH>;
    };
};

/ {
    // Y3 and Y4 on the board
    ref50M: ref50M {
        compatible = "fixed-clock";
        #clock-cells = <0>;
        clock-frequency = <50000000>;
    };
};

&i2c0 {
    eeprom_mac: eeprom@50 {
        compatible = "atmel,24c64";
        reg = <0x50>;
        pagesize = <16>;
    };

    si570_mgt_lll: clock-generator@5d {
        #clock-cells = <0>;
        compatible = "silabs,si570";
        temperature-stability = <50>;
        reg = <0x55>;
        factory-fout = <125000000>;
        clock-frequency = <156250000>;
        clock-output-names = "si570_mgt_lll";
    };

    si5341_pl: clock-generator@77 {
        reg = <0x77>;
        compatible = "silabs,si5341";
        #clock-cells = <2>;
        #address-cells = <1>;
        #size-cells = <0>;
        clocks = <&ref50M>;
        clock-names = "xtal";

        silabs,pll-m-num = <13600>;
        silabs,pll-m-den = <50>;

        out@6 {
            reg = <6>;
            silabs,format = <2>;
            silabs,amplitude = <3>;
            silabs,synth-master;
            always-on;
        };
    };
};

/ {
    ddr_clk: ddr_clk {
        clock-names = "clk_ddr";
        clocks = <&si5341_pl 0 6>;

        assigned-clocks = <&si5341_pl 0 6>, <&si5341_pl 1 3>;
        assigned-clock-parents = <&si5341_pl 1 3>;
        assigned-clock-rates = <400000000>, <400000000>;
    };
};
